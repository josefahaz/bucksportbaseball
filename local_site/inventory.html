<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bucksport Little League - Equipment Inventory</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --primary: #4b2d72;
      --secondary: #ffc72c;
      --light: #f8f9fa;
      --dark: #343a40;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
      --info: #17a2b8;
    }
    body {
      background-color: #4b2d72;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      line-height: 1.5;
      display: flex;
      min-height: 100vh;
    }
    /* Sidebar Styles */
    .sidebar {
      width: 250px;
      background-color: #4b2d72;
      color: white;
      padding: 1.5rem 1rem;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 1000;
    }
    
    .sidebar h2 {
      color: #ffc72c;
      margin-bottom: 2rem;
      padding: 0 0.5rem;
      font-size: 1.25rem;
      font-weight: 700;
    }
    
    .sidebar nav {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .sidebar a {
      color: white;
      text-decoration: none;
      padding: 0.75rem 1rem;
      border-radius: 0.375rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      transition: all 0.2s;
    }
    
    .sidebar a:hover {
      background-color: rgba(255, 255, 255, 0.1);
      color: #ffc72c;
    }
    
    .sidebar a.active {
      background-color: #ffc72c;
      color: #4b2d72;
      font-weight: 500;
    }
    
    .sidebar i {
      width: 1.5rem;
      text-align: center;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .dashboard-container {
      background: rgba(255, 255, 255, 0.9);
      padding: 30px;
      border-radius: 8px;
      margin: 20px 0;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    .btn-approve {
      background-color: #10b981;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    .btn-primary:hover {
      background-color: #3a235a;
    }
    .btn-success {
      background-color: var(--success);
      color: white;
    }
    .btn-success:hover {
      background-color: #218838;
    }
    .badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    .badge-success {
      background-color: #d4edda;
      color: #155724;
    }
    .badge-warning {
      background-color: #fff3cd;
      color: #856404;
    }
    .badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-align: center;
      white-space: nowrap;
    }
    
    .badge-success {
      background-color: #d1fae5;
      color: #065f46;
    }
    
    .badge-warning {
      background-color: #fef3c7;
      color: #92400e;
    }
    
    .badge-danger {
      background-color: #fee2e2;
      color: #b91c1c;
    }
    
    .badge-secondary {
      background-color: #e5e7eb;
      color: #374151;
    }
    .table-container {
      background: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      margin-top: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
    }
    thead {
      background-color: #f9fafb;
      border-bottom: 2px solid #e5e7eb;
    }
    th {
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      color: #4b5563;
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.05em;
      border-bottom: 2px solid #e5e7eb;
    }
    td {
      padding: 16px;
      border-bottom: 1px solid #e5e7eb;
      color: #1f2937;
      font-size: 0.875rem;
    }
    tr:last-child td {
      border-bottom: none;
    }
    tbody tr:hover {
      background-color: #f9fafb;
    }
    
    /* Ensure the table takes full width and is scrollable on mobile */
    .main-content {
      width: 100%;
      overflow-x: auto;
      padding: 1.5rem;
    }
  </style>
</head>
<body>
  <!-- Activity Log Modal (hidden, kept for future use) -->
  <div id="activityLogModal" class="hidden"></div>

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>Bucksport LL</h2>
    </div>
    <nav class="sidebar-nav">
      <div class="sidebar-section">
        <p class="sidebar-section-title">Public</p>
        <a href="index.html"><i class="fas fa-home"></i> Home</a>
        <a href="teams.html"><i class="fas fa-users"></i> Teams</a>
      </div>
      <div class="sidebar-section">
        <p class="sidebar-section-title">Admin</p>
        <a href="coach-dashboard.html"><i class="fas fa-tachometer-alt"></i> Coach Dashboard</a>
        <a href="inventory.html" class="active"><i class="fas fa-tshirt"></i> Equipment Inventory</a>
        <a href="schedule.html"><i class="fas fa-calendar-alt"></i> Schedule</a>
        </div><div class="sidebar-section"><p class="sidebar-section-title">Marketing & Fundraising</p>
        <a href="concessions.html" class="sidebar-subitem"><i class="fas fa-hamburger"></i> Concessions</a>
        <a href="event_concessions.html" class="sidebar-subitem"><i class="fas fa-clipboard-list"></i> Event Concessions</a>
        <a href="fundraising.html" class="sidebar-subitem"><i class="fas fa-hand-holding-usd"></i> Fundraising & Donations</a>
      </div>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="container" style="margin-left: 250px; width: calc(100% - 250px);">
    <div class="main-content" style="flex-grow: 1;">
    <div class="container mx-auto px-4">
      <header class="text-center py-8 relative">
        <div class="flex flex-col items-center">
          <img src="images/logo.png" alt="Bucksport Little League" class="h-20 mb-4" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));">
          <h1 class="text-3xl font-extrabold" style="color: #ffc72c; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">Equipment & Uniform Inventory</h1>
        </div>
        <button id="addItemBtn" class="btn-approve absolute top-10 right-5">
          <i class="fas fa-plus"></i> Add New Item
        </button>
      </header>
    </div>

"section" style="margin-bottom: 30px;">
        <h2 style="color: #4b2d72; border-bottom: 2px solid #ffc72c; padding-bottom: 8px; margin-bottom: 20px;">
          <i class="fas fa-tshirt"></i> Inventory Summary
        </h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 24px;">
          <!-- Total Items -->
          <div style="background: white; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <h3 style="margin: 0 0 12px 0; font-size: 0.875rem; font-weight: 500; color: #6b7280; display: flex; align-items: center; gap: 8px;">
              <i class="fas fa-boxes" style="color: #4b2d72; font-size: 1rem;"></i>
              <span>Total Items</span>
            </h3>
            <div id="total-items-value" style="font-size: 1.875rem; font-weight: 700; color: #111827;">...</div>
            <div style="display: flex; align-items: center; font-size: 0.875rem; color: #10b981; margin-top: 8px;">
              <i class="fas fa-arrow-up" style="margin-right: 4px;"></i>
              <span>12% from last month</span>
            </div>
          </div>
          
          <!-- Available -->
          <div style="background: white; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <h3 style="margin: 0 0 12px 0; font-size: 0.875rem; font-weight: 500; color: #6b7280; display: flex; align-items: center; gap: 8px;">
              <i class="fas fa-check-circle" style="color: #10b981; font-size: 1rem;"></i>
              <span>Available</span>
            </h3>
            <div id="available-items-value" style="font-size: 1.875rem; font-weight: 700; color: #111827;">...</div>
            <div style="display: flex; align-items: center; font-size: 0.875rem; color: #10b981; margin-top: 8px;">
              <i class="fas fa-arrow-up" style="margin-right: 4px;"></i>
              <span>8% from last month</span>
            </div>
          </div>
          
          <!-- Checked Out -->
          <div style="background: white; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <h3 style="margin: 0 0 12px 0; font-size: 0.875rem; font-weight: 500; color: #6b7280; display: flex; align-items: center; gap: 8px;">
              <i class="fas fa-sign-out-alt" style="color: #3b82f6; font-size: 1rem;"></i>
              <span>Checked Out</span>
            </h3>
            <div id="checked-out-items-value" style="font-size: 1.875rem; font-weight: 700; color: #111827;">...</div>
            <div style="display: flex; align-items: center; font-size: 0.875rem; color: #ef4444; margin-top: 8px;">
              <i class="fas fa-arrow-down" style="margin-right: 4px;"></i>
              <span>3% from last month</span>
            </div>
          </div>
          
          <!-- Needs Repair -->
          <div style="background: white; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <h3 style="margin: 0 0 12px 0; font-size: 0.875rem; font-weight: 500; color: #6b7280; display: flex; align-items: center; gap: 8px;">
              <i class="fas fa-tools" style="color: #f59e0b; font-size: 1rem;"></i>
              <span>Needs Repair</span>
            </h3>
            <div id="needs-repair-items-value" style="font-size: 1.875rem; font-weight: 700; color: #111827;">...</div>
            <div style="display: flex; align-items: center; font-size: 0.875rem; color: #ef4444; margin-top: 8px;">
              <i class="fas fa-arrow-up" style="margin-right: 4px;"></i>
              <span>2 from last week</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Filter Section -->
      <div class="filter-bar" style="background: white; border-radius: 8px; padding: 16px; margin-bottom: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
        <div style="display: flex; flex-wrap: wrap; gap: 16px; align-items: flex-end;">
          <div style="flex: 1; min-width: 200px;">
            <label style="display: block; font-size: 0.875rem; color: #4b5563; margin-bottom: 4px; font-weight: 500;">Category</label>
            <select id="categoryFilter" class="filter-select" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; font-size: 0.875rem; color: #1f2937;">
              <option value="">All Categories</option>
            </select>
          </div>
          
          <div style="flex: 1; min-width: 180px;">
            <label style="display: block; font-size: 0.875rem; color: #4b5563; margin-bottom: 4px; font-weight: 500;">Status</label>
            <select id="statusFilter" class="filter-select" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; font-size: 0.875rem; color: #1f2937;">
              <option value="">All Statuses</option>
            </select>
          </div>
          
          <div style="flex: 1; min-width: 180px;">
            <label style="display: block; font-size: 0.875rem; color: #4b5563; margin-bottom: 4px; font-weight: 500;">Team</label>
            <select id="teamFilter" class="filter-select" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; font-size: 0.875rem; color: #1f2937;">
              <option value="">All Teams</option>
            </select>
          </div>
          
          <div style="flex: 1; min-width: 200px;">
            <label style="display: block; font-size: 0.875rem; color: #4b5563; margin-bottom: 4px; font-weight: 500;">Assigned Coach</label>
            <select id="coachFilter" class="filter-select" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; font-size: 0.875rem; color: #1f2937;">
              <option value="">All Coaches</option>
            </select>
          </div>
          
          <button class="btn-approve" style="padding: 8px 16px; background-color: #4b2d72; color: white; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 0.875rem; height: 38px;">
            <i class="fas fa-filter"></i> Apply Filters
          </button>
        </div>
      </div>

      <!-- Inventory Table -->
      <div class="section" style="margin-top: 30px;">
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
          <div style="padding: 16px 24px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0; color: #4b2d72; font-size: 1.125rem; font-weight: 600; display: flex; align-items: center;">
              <i class="fas fa-list-ul" style="margin-right: 10px; color: #ffc72c; font-size: 1.1em;"></i> Inventory Items
            </h2>
            <div style="display: flex; gap: 12px;">
              <button style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; color: #4b5563; font-size: 0.875rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; transition: all 0.2s;" onmouseover="this.style.borderColor='#9ca3af'; this.style.backgroundColor='#f9fafb'" onmouseout="this.style.borderColor='#d1d5db'; this.style.backgroundColor='white'">
                <i class="fas fa-file-export" style="margin-right: 6px; font-size: 0.9em;"></i> Export
              </button>
              <button style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; color: #4b5563; font-size: 0.875rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; transition: all 0.2s;" onmouseover="this.style.borderColor='#9ca3af'; this.style.backgroundColor='#f9fafb'" onmouseout="this.style.borderColor='#d1d5db'; this.style.backgroundColor='white'">
                <i class="fas fa-print" style="margin-right: 6px; font-size: 0.9em;"></i> Print
              </button>
            </div>
          </div>
          
          <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
            <table style="width: 100%; border-collapse: collapse; min-width: 1000px;">
              <thead>
                <tr style="background-color: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                  <th style="padding: 12px 16px; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Item</th>
                  <th style="padding: 12px 16px; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Category</th>
                  <th style="padding: 12px 16px; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Size</th>
                  <th style="padding: 12px 16px; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Team</th>
                  <th style="padding: 12px 16px; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Assigned To</th>
                  <th style="padding: 12px 16px; text-align: right; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Qty</th>
                  <th style="padding: 12px 16px; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Status</th>
                  <th style="padding: 12px 16px; text-align: right; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Last Updated</th>
                  <th style="padding: 12px 16px; text-align: right; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Actions</th>
                </tr>
              </thead>
              <tbody id="inventory-table-body">
                <!-- Inventory items will be populated here by JavaScript -->
              </tbody> 
              <tbody id='inventoryTableBody'></tbody>
            </table>
          </div>
          
          <!-- Pagination -->
          <div style="padding: 16px 24px; border-top: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; background-color: #f9fafb;">
            <div style="font-size: 0.875rem; color: #4b5563;">
              Showing <span style="font-weight: 600;">1</span> to <span style="font-weight: 600;">3</span> of <span style="font-weight: 600;">47</span> results
            </div>
            <div style="display: flex; gap: 8px;">
              <button style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; color: #4b5563; font-size: 0.875rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; transition: all 0.2s;" onmouseover="this.style.borderColor='#9ca3af'; this.style.backgroundColor='#f9fafb'" onmouseout="this.style.borderColor='#d1d5db'; this.style.backgroundColor='white'">
                <i class="fas fa-chevron-left" style="font-size: 0.7em; margin-right: 4px;"></i> Previous
              </button>
              <button style="padding: 6px 12px; border: 1px solid #4b2d72; border-radius: 6px; background-color: #4b2d72; color: white; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.backgroundColor='#3d245c'" onmouseout="this.style.backgroundColor='#4b2d72'">
                1
              </button>
              <button style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; color: #4b5563; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.borderColor='#9ca3af'; this.style.backgroundColor='#f9fafb'" onmouseout="this.style.borderColor='#d1d5db'; this.style.backgroundColor='white'">
                2
              </button>
              <button style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; color: #4b5563; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.borderColor='#9ca3af'; this.style.backgroundColor='#f9fafb'" onmouseout="this.style.borderColor='#d1d5db'; this.style.backgroundColor='white'">
                3
              </button>
              <button style="padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background-color: white; color: #4b5563; font-size: 0.875rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; transition: all 0.2s;" onmouseover="this.style.borderColor='#9ca3af'; this.style.backgroundColor='#f9fafb'" onmouseout="this.style.borderColor='#d1d5db'; this.style.backgroundColor='white'">
                Next <i class="fas fa-chevron-right" style="font-size: 0.7em; margin-left: 4px;"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add/Edit Item Modal -->
    <!-- Add/Edit Item Modal -->
  <script src="js/api.js"></script>
  <div id="itemModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div class="modal-content" style="background: white; padding: 24px; border-radius: 8px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 1px solid #e5e7eb;">
        <h3 style="margin: 0; font-size: 1.25rem; font-weight: 600; color: #111827;">Add New Inventory Item</h3>
        <button id="closeModal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6b7280;">&times;</button>
      </div>
      <form id="itemForm">
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
          <div>
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Item Name *</label>
            <input type="text" name="itemName" required style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px;">
          </div>
          <div>
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Category *</label>
            <select name="category" required style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px;">
              <option value="">Select Category</option>
              <option value="jersey">Jersey</option>
              <option value="pants">Pants</option>
              <option value="hat">Hat</option>
              <option value="cleats">Cleats</option>
              <option value="bat">Bat</option>
              <option value="ball">Baseball/Softball</option>
              <option value="glove">Glove</option>
              <option value="helmet">Helmet</option>
              <option value="other">Other Equipment</option>
            </select>
          </div>
          <div>
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Size</label>
            <input type="text" name="size" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px;" placeholder="e.g., M, L, XL, 10, 12">
          </div>
          <div>
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Team</label>
            <select id="itemTeam" name="team" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px;">
              <option value="">Select Team</option>
              <option value="Unassigned">Unassigned</option>
            </select>
          </div>
          <div>
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Assigned Coach</label>
            <select id="assignedCoach" name="assignedCoach" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px;">
              <option value="unassigned">Unassigned</option>
            </select>
          </div>
          <div>
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Quantity *</label>
            <input type="number" name="quantity" min="0" value="1" required style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px;">
          </div>
          <div>
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Status *</label>
            <select name="status" required style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px;">
              <option value="in-stock">In Stock</option>
              <option value="low-stock">Low Stock</option>
              <option value="out-of-stock">Out of Stock</option>
              <option value="needs-repair">Needs Repair</option>
              <option value="retired">Retired</option>
            </select>
          </div>
          <div style="grid-column: span 2;">
            <label style="display: block; margin-bottom: 4px; font-size: 0.875rem; font-weight: 500; color: #4b5563;">Notes</label>
            <textarea style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; min-height: 80px;" placeholder="Any additional notes about this item"></textarea>
          </div>
        </div>
        <div style="margin-top: 24px; display: flex; justify-content: flex-end; gap: 12px;">
          <button type="button" id="cancelBtn" style="padding: 8px 16px; background: white; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer; font-weight: 500; color: #4b5563;">
            Cancel
          </button>
          <button type="submit" style="padding: 8px 16px; background: #4b2d72; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
            Save Item
          </button>
        </div>
      </form>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', async () => {
    // --- DOM Elements ---
    const inventoryTableBody = document.getElementById('inventory-table-body');
    const totalItemsEl = document.getElementById('total-items-value');
    const availableItemsEl = document.getElementById('available-items-value');
    const checkedOutItemsEl = document.getElementById('checked-out-items-value');
    const needsRepairItemsEl = document.getElementById('needs-repair-items-value');

    const categoryFilterEl = document.getElementById('categoryFilter');
    const statusFilterEl = document.getElementById('statusFilter');
    const teamFilterEl = document.getElementById('teamFilter');
    const coachFilterEl = document.getElementById('coachFilter');
    const searchInput = document.getElementById('search-input');

    let allInventory = [];
    let allCoaches = [];

    // --- Utility Functions ---
    const getStatusBadge = (status) => {
        const statusClasses = {
            'in-stock': 'badge-success',
            'low-stock': 'badge-warning',
            'out-of-stock': 'badge-danger',
            'needs-repair': 'badge-warning',
            'retired': 'badge-secondary'
        };
        const statusText = status.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        return `<span class="badge ${statusClasses[status] || 'badge-secondary'} p-2 text-xs font-medium rounded-full">${statusText}</span>`;
    };

    // --- Render Functions ---
    const renderInventoryTable = (items) => {
        inventoryTableBody.innerHTML = '';
        if (!items || items.length === 0) {
            inventoryTableBody.innerHTML = '<tr><td colspan="9" class="text-center text-gray-500 py-8">No inventory items match the current filters.</td></tr>';
            return;
        }

        items.forEach(item => {
            const coachName = item.assigned_coach ? item.assigned_coach.name : 'Unassigned';
            const teamName = item.team ? item.team.name : 'Unassigned';
            const lastUpdated = item.last_updated ? new Date(item.last_updated).toLocaleDateString() : 'N/A';
            
            const row = document.createElement('tr');
            row.className = 'border-b border-gray-200 hover:bg-gray-50';
            row.innerHTML = `
                <td class="p-4"><div class="font-medium text-gray-800">${item.name}</div><div class="text-xs text-gray-500">${item.id || ''}</div></td>
                <td class="p-4 text-gray-600">${item.category}</td>
                <td class="p-4 text-gray-600">${item.size || 'N/A'}</td>
                <td class="p-4 text-gray-600">${teamName}</td>
                <td class="p-4 text-gray-600">${coachName}</td>
                <td class="p-4 text-right font-medium text-gray-800">${item.quantity}</td>
                <td class="p-4">${getStatusBadge(item.status)}</td>
                <td class="p-4 text-right text-gray-600">${lastUpdated}</td>
                <td class="p-4 text-right">
                    <button class="edit-btn text-blue-600 hover:text-blue-800 p-1" data-id="${item.id}" title="Edit Item"><i class="fas fa-edit"></i></button>
                    <button class="delete-btn text-red-600 hover:text-red-800 p-1" data-id="${item.id}" title="Delete Item"><i class="fas fa-trash"></i></button>
                </td>
            `;
            inventoryTableBody.appendChild(row);
        });
    };

    const renderSummary = (summary) => {
        totalItemsEl.textContent = summary.total_items || '0';
        availableItemsEl.textContent = summary.available || '0';
        checkedOutItemsEl.textContent = summary.checked_out || '0';
        needsRepairItemsEl.textContent = summary.needs_repair || '0';
    };

    const populateDropdown = (selectElement, options, defaultOptionText) => {
        if (!selectElement) return;
        selectElement.innerHTML = `<option value="">${defaultOptionText}</option>`;
        if (!options) return;
        
        options.forEach(option => {
            const value = typeof option === 'object' ? option.id : option;
            const text = typeof option === 'object' ? option.name : option;
            const optionEl = document.createElement('option');
            optionEl.value = value;
            optionEl.textContent = text;
            selectElement.appendChild(optionEl);
        });
    };

    // --- Data Fetching and Initialization ---
    const initializePage = async () => {
        try {
            const [inventory, summary, coaches, teams, categories, statuses] = await Promise.all([
                fetchInventory(),
                fetchInventorySummary(),
                fetchCoaches(),
                fetchTeams(),
                fetchCategories(),
                fetchStatuses()
            ]);

            allInventory = inventory;
            allCoaches = coaches;

            renderInventoryTable(allInventory);
            renderSummary(summary);
            populateDropdown(categoryFilterEl, categories, 'All Categories');
            populateDropdown(statusFilterEl, statuses, 'All Statuses');
            populateDropdown(teamFilterEl, teams, 'All Teams');
            populateDropdown(coachFilterEl, allCoaches, 'All Coaches');

        } catch (error) {
            console.error('Failed to initialize page:', error);
            inventoryTableBody.innerHTML = '<tr><td colspan="9" class="text-center text-red-500 py-8">Failed to load inventory data. Please check the API connection and try again.</td></tr>';
        }
    };

    // --- Filtering Logic ---
    const applyFilters = () => {
        const searchTerm = searchInput.value.toLowerCase();
        const category = categoryFilterEl.value;
        const status = statusFilterEl.value;
        const teamId = teamFilterEl.value;
        const coachId = coachFilterEl.value;

        let filteredInventory = allInventory.filter(item => {
            const teamMatch = !teamId || (item.team && item.team.id == teamId);
            const coachMatch = !coachId || (item.assigned_coach && item.assigned_coach.id == coachId);
            const categoryMatch = !category || item.category === category;
            const statusMatch = !status || item.status === status;
            const searchMatch = item.name.toLowerCase().includes(searchTerm) || (item.id && item.id.toLowerCase().includes(searchTerm));

            return teamMatch && coachMatch && categoryMatch && statusMatch && searchMatch;
        });
        renderInventoryTable(filteredInventory);
    };

    // --- Event Listeners ---
    [searchInput, categoryFilterEl, statusFilterEl, teamFilterEl, coachFilterEl].forEach(el => {
        if (el) {
            const eventType = el.tagName === 'INPUT' ? 'keyup' : 'change';
            el.addEventListener(eventType, applyFilters);
        }
    });

    // --- Initial Load ---
    initializePage();
});
</script>
</body>
</html>
